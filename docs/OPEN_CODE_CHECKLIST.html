<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.543">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Publishing Your First Repo</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./diagnostics_endoscopy_activity.html"> 
<span class="menu-text">Endoscopy</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#open-code-checklist" id="toc-open-code-checklist" class="nav-link active" data-scroll-target="#open-code-checklist">Open Code Checklist</a>
  <ul class="collapse">
  <li><a href="#when-publishing-your-code-you-need-to-make-sure" id="toc-when-publishing-your-code-you-need-to-make-sure" class="nav-link" data-scroll-target="#when-publishing-your-code-you-need-to-make-sure">When publishing your code you need to make sure:</a>
  <ul class="collapse">
  <li><a href="#youre-clear-about-who-owns-the-code-and-how-others-can-use-it" id="toc-youre-clear-about-who-owns-the-code-and-how-others-can-use-it" class="nav-link" data-scroll-target="#youre-clear-about-who-owns-the-code-and-how-others-can-use-it">you’re clear about who owns the code and how others can use it</a></li>
  <li><a href="#you-do-not-release-information-that-should-remain-closed" id="toc-you-do-not-release-information-that-should-remain-closed" class="nav-link" data-scroll-target="#you-do-not-release-information-that-should-remain-closed">You do not release information that should remain closed</a></li>
  <li><a href="#you-store-it-in-a-repository-managed-by-your-department-to-make-licensingcopyright-clear" id="toc-you-store-it-in-a-repository-managed-by-your-department-to-make-licensingcopyright-clear" class="nav-link" data-scroll-target="#you-store-it-in-a-repository-managed-by-your-department-to-make-licensingcopyright-clear">You store it in a repository managed by your department (to make licensing/copyright clear)</a></li>
  <li><a href="#any-third-party-tools-you-use-to-host-or-manage-your-code-follow-the-national-cyber-security-centres-cloud-security-guidance" id="toc-any-third-party-tools-you-use-to-host-or-manage-your-code-follow-the-national-cyber-security-centres-cloud-security-guidance" class="nav-link" data-scroll-target="#any-third-party-tools-you-use-to-host-or-manage-your-code-follow-the-national-cyber-security-centres-cloud-security-guidance">Any third-party tools you use to host or manage your code follow the National Cyber Security Centre’s cloud security guidance</a></li>
  <li><a href="#an-internal-code-review-has-been-completed" id="toc-an-internal-code-review-has-been-completed" class="nav-link" data-scroll-target="#an-internal-code-review-has-been-completed">An internal code review has been completed</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">




<section id="open-code-checklist" class="level1">
<h1>Open Code Checklist</h1>
<p>To ensure that the code we publish is appropraite, clear and reusable we require a set way of working when pushing code to private and public repoistories. It is difficult to set any precise but generic standards and so we ask that the following checklist is considered with mandatroy items filled out.</p>
<section id="when-publishing-your-code-you-need-to-make-sure" class="level2">
<h2 class="anchored" data-anchor-id="when-publishing-your-code-you-need-to-make-sure">When publishing your code you need to make sure:</h2>
<section id="youre-clear-about-who-owns-the-code-and-how-others-can-use-it" class="level3">
<h3 class="anchored" data-anchor-id="youre-clear-about-who-owns-the-code-and-how-others-can-use-it">you’re clear about who owns the code and how others can use it</h3>
<ul class="task-list">
<li><label><input type="checkbox">Does your code have an appropriate licence and copyright notice? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Is there a README and does it document intended purpose? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Is the README clear and concise? (<strong>Optional</strong> - use analytics unit template or <a href="https://github.com/othneildrew/Best-README-Template/blob/master/BLANK_README.md">example</a>)</label></li>
<li><label><input type="checkbox">Do you need to consider MHRA ‘software as a medical device’ guidance? (<strong>Mandatory</strong> - use <a href="https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/999908/Software_flow_chart_Ed_1-08b-IVD.pdf">flowchart</a>)</label></li>
<li><label><input type="checkbox">Who has responsibility for ongoing support and communications for the code? (<strong>Optional</strong> Best practice to assign, else state the code is not maintained and when the last update was)</label></li>
<li><label><input type="checkbox">Has a responsible disclosure process for security issues been defined? (<strong>Mandatory</strong> - could use github issues)</label></li>
<li><label><input type="checkbox">Who will address identified issues and security concerns? (<strong>Mandatory</strong>. - assign monitoring of above disclosure process)</label></li>
<li><label><input type="checkbox">Has semantic versioning been used? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">Have <a href="https://github.com/alphagov/govuk-frontend/blob/master/CONTRIBUTING.md">contribution guidelines</a> or <a href="https://github.com/alphagov/styleguides/blob/master/pull-requests.md">PR style guides</a> been included? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">Are package dependencies and libaries documented with versions? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">Has the code been linked to any published outputs so others can easily link to the code? (<strong>Optional</strong>)</label></li>
</ul>
</section>
<section id="you-do-not-release-information-that-should-remain-closed" class="level3">
<h3 class="anchored" data-anchor-id="you-do-not-release-information-that-should-remain-closed">You do not release information that should remain closed</h3>
<ul class="task-list">
<li><label><input type="checkbox">Does the code include any sensitive, personal, secret or top secret data/information? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Does the code include any unreleased policy? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Does the code include business sensitive algorithms (e.g.&nbsp;finance allocations)? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Has written permission been obtained for any data stored from the data owner? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Are owners of services which the code fulfils aware of the release? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Are any data transfers conducted safely and securely? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Are any credentials contained in the source code? (<strong>Mandatory</strong> - check in both current version and git history)</label></li>
<li><label><input type="checkbox">Are any secret keys contained in the source code? (<strong>Mandatory</strong> - check in both current version and git history)</label></li>
<li><label><input type="checkbox">Are any SQL server addresses or connection strings in the source code? (<strong>Mandatory</strong> - check in both current version and git history)</label></li>
<li><label><input type="checkbox">Are the commit messages informative? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">Do the commit messages include any sensitive information (e.g.&nbsp;names)? (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Does the git history contain any sensitive information (e.g.&nbsp;at one time real data or credentials were in the code but have since been removed) (<strong>Mandatory</strong>)</label></li>
<li><label><input type="checkbox">Have notebook outputs been removed/checked for sensitive information? (<strong>Mandatory</strong> - check but some appropriate outputs maybe useful: <a href="https://github.com/best-practice-and-impact/govcookiecutter/blob/main/%7B%7B%20cookiecutter.repo_name%20%7D%7D/.pre-commit-config.yaml">Example</a>)</label></li>
<li><label><input type="checkbox">Is configuration written as code and separated from analytical code? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">have you checked any screenshots or figures in your outputs and documentation for information that shouldn’t be released? (<strong>Mandatory</strong>)</label></li>
</ul>
</section>
<section id="you-store-it-in-a-repository-managed-by-your-department-to-make-licensingcopyright-clear" class="level3">
<h3 class="anchored" data-anchor-id="you-store-it-in-a-repository-managed-by-your-department-to-make-licensingcopyright-clear">You store it in a repository managed by your department (to make licensing/copyright clear)</h3>
<ul class="task-list">
<li><label><input type="checkbox">Is the code version controlled using GIT or similar? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">Is the code stored in your organisational GitHub account? Is it the same organisation that funds the relevant staff time? (<strong>Optional</strong>)</label></li>
</ul>
</section>
<section id="any-third-party-tools-you-use-to-host-or-manage-your-code-follow-the-national-cyber-security-centres-cloud-security-guidance" class="level3">
<h3 class="anchored" data-anchor-id="any-third-party-tools-you-use-to-host-or-manage-your-code-follow-the-national-cyber-security-centres-cloud-security-guidance">Any third-party tools you use to host or manage your code follow the National Cyber Security Centre’s cloud security guidance</h3>
<ul class="task-list">
<li><label><input type="checkbox">Are third party tools used within the code? (<strong>Mandatory</strong> check. Best practice is to keep an inventory)</label></li>
<li><label><input type="checkbox">If so do they adhere to the NCSC’s <a href="https://www.ncsc.gov.uk/collection/cloud-security/implementing-the-cloud-security-principles">Cloud Security Principles</a>? (<strong>Mandatory</strong>)</label></li>
</ul>
</section>
<section id="an-internal-code-review-has-been-completed" class="level3">
<h3 class="anchored" data-anchor-id="an-internal-code-review-has-been-completed">An internal code review has been completed</h3>
<ul class="task-list">
<li><label><input type="checkbox">Has a colleague reviewed the code for sensitive data content and security vulnerabilities? (<strong>Mandatory</strong> - Best practice is to record automated code quality and security tools used)</label></li>
<li><label><input type="checkbox">Has a code quality review been completed focussing on the end usability and clarity? (<strong>Optional</strong> - consider runing through the <a href="https://best-practice-and-impact.github.io/qa-of-code-guidance/checklist_higher.html">example</a> or similar code quality checklist)</label></li>
<li><label><input type="checkbox">Has the code been assessed for its <a href="https://github.com/NHSDigital/rap-community-of-practice/blob/main/what_is_RAP/levels_of_RAP.md">level or RAP</a>(Reproducible Analytical Pipeline)? (<strong>Optional</strong>)</label></li>
<li><label><input type="checkbox">Has the code undergone some level of testing. The level of teting required will depend on the specific code and use-case but as minimum it should work in a fresh environment with arteficial data. (<strong>Optional</strong>)</label></li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>